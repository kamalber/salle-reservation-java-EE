<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:composition template="/template/layout.xhtml">

        <ui:define name="JquRy">  </ui:define><!-- eviter le conflit de jqury-->

        <ui:define name="content">  

            <div class=""></div>
            <div class="col-md-9">
                <div class="content-box-header">
                    <div class="panel-title center">Calendrier </div>

                    <div class="panel-options">
                        <a href="#" data-rel="collapse"><i class="glyphicon glyphicon-refresh"></i></a>
                        <a href="#" data-rel="reload"><i class="glyphicon glyphicon-cog"></i></a>
                    </div>
                </div>
                <div class="content-box-large box-with-header">


                    <h:form>
                        <p:growl id="messages" showDetail="true" />

                        <h:panelGrid columnClasses="value">
                            <h3 style="margin-top: 0">reservation  calendrier</h3>
                            <p:schedule id="schedule"   resizable="true" locale="fr" value="#{reservationController.eventModel}"  widgetVar="myschedule" timeZone="GMT+2">

                                <p:ajax event="dateSelect" listener="#{reservationController.onDateSelect}" update="eventDetails" oncomplete="PF('eventDialog').show();" />
                                <p:ajax event="eventSelect" listener="#{reservationController.onEventSelect}" update="eventDetails" oncomplete="PF('eventDialog').show();" />
                                <p:ajax event="eventMove" listener="#{reservationController.onEventMove}" update="messages" />
                                <p:ajax event="eventResize" listener="#{reservationController.onEventResize}" update="messages" />

                            </p:schedule>


                        </h:panelGrid>

                        <p:dialog widgetVar="eventDialog" header="Event Details" showEffect="clip" hideEffect="clip">
                            <h:panelGroup class="row"   id="eventDetails" >

                                <div class="col-md">
                                    <div class="content-box-large center center-block">
                                        <div class="tab-content form-horizontal center center-block">

                                            <div class="form-group">
                                                <h:outputLabel value="#{bundle.CreateReservationLabel_startDate}"   class="col-sm-2 control-label" for="startDate"  ></h:outputLabel>
                                                <div class="col-sm-10">		
                                                    <p:calendar  id="startDate" value="#{reservationController.event.startDate}" size="57"  styleClass="startDate_1"   timeZone="GMT+2" pattern="dd/MM/yyyy HH:mm"></p:calendar>

                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <h:outputLabel value="#{bundle.CreateReservationLabel_endDate}"  class="col-sm-2 control-label" for="endDate"  ></h:outputLabel>
                                                <div class="col-sm-10">	
                                                    <p:calendar  id="endDate" value="#{reservationController.event.endDate}" size="57"  styleClass="endDate_1"  timeZone="GMT+2" pattern="dd/MM/yyyy HH:mm"></p:calendar>

                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <h:outputLabel value="#{bundle.CreateReservationLabel_description}"  class="col-sm-2 control-label" for="description" ></h:outputLabel>
                                                <div class="col-sm-10">
                                                    <h:inputText id="description" value="#{reservationController.event.title}"  required="true" class="form-control" title="#{bundle.CreateReservationTitle_description}" />
                                                </div></div>
                                            <div class="form-group">
                                                <h:outputLabel value="#{bundle.CreateReservationLabel_type}" class="col-sm-2 control-label" for="type" ></h:outputLabel>
                                                <div class="col-sm-10">
                                                    <h:selectOneMenu id="type" class="form-control" value="#{reservationController.typeReservation}"  required="true" title="#{bundle.CreateReservationTitle_type}" >
                                                        <f:selectItem itemValue="CC" itemLabel="CC" />
                                                        <f:selectItem itemValue="TD" itemLabel="TD" />
                                                        <f:selectItem itemValue="COURS" itemLabel="COURS" />
                                                        <f:selectItem itemValue="TP" itemLabel="TP" />
                                                    </h:selectOneMenu>
                                                </div></div>
                                            <div class="form-group">
                                                <h:outputLabel value="#{bundle.CreateReservationLabel_module}"   class="col-sm-2 control-label" for="module" ></h:outputLabel>
                                                <div class="col-sm-10">
                                                    <h:selectOneMenu id="module" class="form-control" value="#{reservationController.selected.module}"  required="true" title="#{bundle.CreateReservationTitle_module}" >
                                                        <f:selectItems value="#{moduleController.itemsAvailableSelectOne}"/>
                                                    </h:selectOneMenu>
                                                </div></div>
                                            <div class="form-group">
                                                <h:outputLabel value="salle" for="salle"  class="col-sm-2 control-label" ></h:outputLabel>
                                                <div class="col-sm-10">
                                                    <h:selectOneMenu id="salle" class="form-control"  required="true" value="#{reservationController.currentSalle}" title="#{bundle.CreateReservationTitle_salle}" >
                                                        <f:selectItems  value="#{salleController.itemsAvailableSelectOne}"/>
                                                    </h:selectOneMenu>
                                                </div></div>
                                            <div class="form-group">
                                                <h:outputLabel value="coleur" for="color"  class="col-sm-2 control-label" ></h:outputLabel>
                                                <div class="col-sm-10">
                                               
                                                    <p:colorPicker  value="#{reservationController.selected.color}"  required="true" styleClass="form-control" class="col-md-4"  ></p:colorPicker>
                                                </div></div>
                                            <div class="form-group center-block center">
                                                <div class="row-fluid center-block">
                                                    <div class="span4 offset4 text-center">
                                                        <div class="col-lg-3"></div>

                                                        <p:commandButton type="reset" value="Reset" />
                                                        <div class="col-lg-1"></div>
                                                        <p:commandButton id="addButton" value="Save" actionListener="#{reservationController.addEvent}" oncomplete="PF('myschedule').update();PF('eventDialog').hide();" />                                                    
                                                    </div>
                                                </div></div>
                                        </div></div></div></h:panelGroup>
                        </p:dialog>    
                        
                        <!-- #############       update panel                 "#####################-->
                        
                    </h:form>

                    <script type="text/javascript">

                        PrimeFaces.locales['fr'] = {
                            closeText: 'kapat',
                            prevText: 'geri',
                            nextText: 'ileri',
                            currentText: "Aujourd'hui",
                            monthNames: ['Janvier', 'Fevrier', 'Mars', 'Avril', 'Mai', 'Juin',
                                'Juillet', 'Aout', 'Septembre', 'Octobre', 'Novembre', 'Decembre'],
                            monthNamesShort: ['Jan', 'Fev', 'Mar', 'Avr', 'Mai', 'Jui',
                                'Jui', 'Auo', 'Sep', 'Oct', 'Nov', 'Dec'],
                            dayNames: ['Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi', 'Dimanche'],
                            dayNamesShort: ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'],
                            dayNamesMin: ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'],
                            weekHeader: 'Hf',
                            firstDay: 7,
                            isRTL: false,
                            showMonthAfterYear: false,
                            yearSuffix: '',
                            month: 'Mois',
                            week: 'Semaine',
                            day: 'Jour',
                            allDayText: 'Tout les jours'
                        };

                    </script>
                    <style type="text/css">
                        .value {
                            margin-left: 50px;
                            width: 1000px;
                        }
                    </style>

                </div>
            </div>
        </ui:define>
    </ui:composition>
</html>

